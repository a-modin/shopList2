var shopList,kp=function(t){if(t)keyCode=t.which;else{if(!event)return;keyCode=event.keyCode}13==keyCode&&($(".but-add").click(),$(".input-product").val(""))};document.onkeypress=kp,shopList=angular.module("shopList",[]),shopList.controller("ListController",function(t,c){t.calcPrice=function(){for(var c=0,o=0,e=0,u=0;u<t.products.length;u++)"product-buy"===t.products[u].class&&(c+=1,o+=Number(t.products[u].price*t.products[u].count)),e+=t.products[u].price*t.products[u].count;t.calc=c,t.totalPrice=e,t.totalPriceBuy=o},c.get("products.json").success(function(c){t.products=c,t.calcPrice()}),t.add=function(){var c={name:t.inputName,price:t.inputPrice||0,count:1};t.products.unshift(c),t.calcPrice(),$(".input-product").val(""),$.ajax({url:"send.php",type:"GET",data:{data:angular.toJson(t.products)}}).done(function(){console.log("success")})},t.buy=function(c,o){var e=angular.element(c.target);"product-buy"!=o.class?(o.class="product-buy",e.parent().addClass("product-buy")):(o.class="",e.parent().removeClass("product-buy")),$.ajax({url:"send.php",type:"GET",data:{data:angular.toJson(t.products)}}).done(function(){}),t.calcPrice()},t.delete=function(c){var o=t.products.indexOf(c);t.products.splice(o,1),$.ajax({url:"send.php",type:"GET",data:{data:angular.toJson(t.products)}}).done(function(){console.log("success")}),t.calcPrice()},t.edit=function(){this.product.edit=1!=this.product.edit?!0:!1}});