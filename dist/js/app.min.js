var shopList,kp=function(t){if(t)keyCode=t.which;else{if(!event)return;keyCode=event.keyCode}13==keyCode&&($(".but-add").click(),$(".input-product").val(""))};document.onkeypress=kp,shopList=angular.module("shopList",[]),shopList.controller("listCtrl",function(t,o){t.calcBuy=function(){for(var o=0,c=0;c<t.products.length;c++)"product-buy"===t.products[c].class&&(o+=1);t.calc=o},o.get("products.json").success(function(o){t.products=o,t.calcBuy()}),t.add=function(){var o={name:t.inputName,price:t.inputPrice};t.products.unshift(o),t.calcBuy(),$.ajax({url:"send.php",type:"GET",data:{data:angular.toJson(t.products)}}).done(function(){console.log("success")})},t.buy=function(o,c){var u=angular.element(o.target);"product-buy"!=c.class?(c.class="product-buy",u.parent().addClass("product-buy")):(c.class="",u.parent().removeClass("product-buy")),$.ajax({url:"send.php",type:"GET",data:{data:angular.toJson(t.products)}}).done(function(){console.log(t.products)}),t.calcBuy()},t.delete=function(o){var c=t.products.indexOf(o);t.products.splice(c,1),$.ajax({url:"send.php",type:"GET",data:{data:angular.toJson(t.products)}}).done(function(){console.log("success")}),t.calcBuy()}});